<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>6√ó6 Matrix Builder | Performance-Based Hiring</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    :root {
      --bg-primary: #0a0f1a;
      --bg-secondary: #111827;
      --bg-tertiary: #1e293b;
      --border: #334155;
      --border-light: #475569;
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --text-muted: #64748b;
      --accent: #3b82f6;
      --accent-green: #22c55e;
      --accent-warm: #f59e0b;
    }
    
    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-primary) 100%);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.5;
    }
    
    .serif {
      font-family: 'Instrument Serif', Georgia, serif;
    }
    
    /* ===== INTRO SCREEN ===== */
    .intro-screen {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 24px;
      text-align: center;
    }
    
    .intro-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(59, 130, 246, 0.15);
      border: 1px solid rgba(59, 130, 246, 0.3);
      color: var(--accent);
      font-size: 0.7rem;
      font-weight: 700;
      padding: 8px 20px;
      border-radius: 100px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      margin-bottom: 24px;
    }
    
    .intro-title {
      font-family: 'Instrument Serif', Georgia, serif;
      font-size: clamp(2.5rem, 7vw, 4.5rem);
      font-weight: 400;
      color: var(--text-primary);
      margin-bottom: 16px;
      letter-spacing: -0.02em;
    }
    
    .intro-title span {
      background: linear-gradient(135deg, var(--accent) 0%, #60a5fa 50%, var(--accent-green) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .intro-subtitle {
      font-size: 1.15rem;
      color: var(--text-secondary);
      max-width: 600px;
      margin-bottom: 48px;
      line-height: 1.7;
    }
    
    .intro-stats {
      display: flex;
      gap: 60px;
      margin-bottom: 48px;
    }
    
    .intro-stat {
      text-align: center;
    }
    
    .intro-stat-number {
      font-family: 'Instrument Serif', serif;
      font-size: 3.5rem;
      font-weight: 400;
      color: var(--text-primary);
    }
    
    .intro-stat-label {
      font-size: 0.65rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.2em;
    }
    
    .intro-visual {
      display: grid;
      grid-template-columns: repeat(6, 50px);
      gap: 6px;
      margin-bottom: 48px;
      opacity: 0.6;
    }
    
    .intro-cell {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      color: var(--text-muted);
    }
    
    .intro-cell.highlight {
      background: rgba(59, 130, 246, 0.15);
      border-color: var(--accent);
      color: var(--accent);
    }
    
    .intro-explanation {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 32px;
      align-items: center;
      max-width: 800px;
      margin-bottom: 48px;
    }
    
    .intro-box {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 24px;
      text-align: left;
    }
    
    .intro-box-label {
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 8px;
    }
    
    .intro-box.problem .intro-box-label { color: #ef4444; }
    .intro-box.solution .intro-box-label { color: var(--accent-green); }
    
    .intro-box-text {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }
    
    .intro-box-text strong {
      color: var(--text-primary);
    }
    
    .intro-arrow {
      font-size: 1.5rem;
      color: var(--text-muted);
    }
    
    .intro-cta {
      padding: 18px 48px;
      background: linear-gradient(135deg, var(--accent), #2563eb);
      border: none;
      border-radius: 12px;
      font-family: inherit;
      font-size: 1.1rem;
      font-weight: 600;
      color: white;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 0 40px rgba(59, 130, 246, 0.3);
    }
    
    .intro-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 60px rgba(59, 130, 246, 0.4);
    }
    
    .intro-footer {
      margin-top: 32px;
      font-size: 0.75rem;
      color: var(--text-muted);
    }
    
    /* ===== BUILDER LAYOUT (Side-by-Side) ===== */
    .builder-layout {
      display: grid;
      grid-template-columns: 420px 1fr;
      min-height: 100vh;
    }
    
    /* Left Panel - Questions */
    .questions-panel {
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      padding: 32px;
      overflow-y: auto;
      max-height: 100vh;
      position: sticky;
      top: 0;
    }
    
    .questions-header {
      margin-bottom: 24px;
    }
    
    .questions-back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: none;
      border: none;
      color: var(--text-muted);
      font-family: inherit;
      font-size: 0.85rem;
      cursor: pointer;
      margin-bottom: 16px;
    }
    
    .questions-back:hover {
      color: var(--text-secondary);
    }
    
    /* Progress */
    .progress-bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin-bottom: 24px;
    }
    
    .progress-step {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .progress-step.completed {
      background: var(--accent-green);
      color: var(--bg-primary);
    }
    
    .progress-step.active {
      background: var(--accent);
      color: white;
      box-shadow: 0 0 16px rgba(59, 130, 246, 0.5);
    }
    
    .progress-step.pending {
      background: var(--bg-tertiary);
      color: var(--text-muted);
    }
    
    .progress-line {
      width: 16px;
      height: 2px;
      background: var(--border);
    }
    
    .progress-line.completed {
      background: var(--accent-green);
    }
    
    /* Question Card */
    .question-card {
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 28px;
    }
    
    .step-label {
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 8px;
    }
    
    .step-title {
      font-family: 'Instrument Serif', serif;
      font-size: 1.4rem;
      font-weight: 400;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    .step-subtitle {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }
    
    /* Options */
    .options-grid {
      display: grid;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .options-grid.two-col {
      grid-template-columns: repeat(2, 1fr);
    }
    
    .option-btn {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 14px 16px;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .option-btn:hover {
      border-color: var(--border-light);
    }
    
    .option-btn.selected {
      border-color: var(--accent);
      background: rgba(59, 130, 246, 0.1);
    }
    
    .option-title {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 2px;
    }
    
    .option-desc {
      font-size: 0.75rem;
      color: var(--text-muted);
    }
    
    /* Text Input */
    .text-input {
      width: 100%;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 14px;
      color: var(--text-primary);
      font-size: 0.9rem;
      font-family: inherit;
      resize: vertical;
      min-height: 100px;
      margin-bottom: 16px;
    }
    
    .text-input:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    .text-input::placeholder {
      color: var(--text-muted);
    }
    
    .input-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .input-group label {
      display: block;
      font-size: 0.75rem;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 6px;
    }
    
    .input-group input, .input-group select {
      width: 100%;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 10px 12px;
      color: var(--text-primary);
      font-size: 0.9rem;
      font-family: inherit;
    }
    
    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: var(--accent);
    }
    
    /* Hint Box */
    .hint-box {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      border-radius: 8px;
      padding: 12px 14px;
      margin-bottom: 16px;
    }
    
    .hint-box p {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .hint-box strong {
      color: var(--accent);
    }
    
    /* Route Card */
    .route-card {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.3);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    
    .route-card h3 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--accent-warm);
      margin-bottom: 8px;
    }
    
    .route-card p {
      font-size: 0.85rem;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }
    
    .route-card a {
      display: inline-block;
      background: var(--accent-warm);
      color: var(--bg-primary);
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    /* Dimensions List */
    .dimensions-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 16px;
    }
    
    .dimension-item {
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 14px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .dimension-number {
      width: 28px;
      height: 28px;
      background: rgba(59, 130, 246, 0.2);
      border: 1px solid rgba(59, 130, 246, 0.3);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--accent);
      flex-shrink: 0;
    }
    
    .dimension-content { flex: 1; }
    
    .dimension-name {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .dimension-desc {
      font-size: 0.75rem;
      color: var(--text-muted);
    }
    
    .dimension-edit {
      background: transparent;
      border: 1px solid var(--border-light);
      border-radius: 6px;
      padding: 6px 10px;
      color: var(--text-muted);
      font-size: 0.7rem;
      cursor: pointer;
    }
    
    .dimension-edit:hover {
      border-color: var(--accent);
      color: var(--accent);
    }
    
    /* Navigation Buttons */
    .btn-row {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      margin-top: 20px;
    }
    
    .btn {
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      font-family: inherit;
    }
    
    .btn-back {
      background: transparent;
      border: 2px solid var(--border-light);
      color: var(--text-secondary);
    }
    
    .btn-back:hover {
      border-color: var(--text-muted);
      color: var(--text-primary);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--accent), #2563eb);
      color: white;
      flex: 1;
    }
    
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
    }
    
    .btn-primary:disabled {
      background: var(--bg-tertiary);
      color: var(--text-muted);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .btn-success {
      background: linear-gradient(135deg, var(--accent-green), #16a34a);
      color: white;
    }
    
    .btn-success:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 16px rgba(34, 197, 94, 0.4);
    }
    
    /* ===== RIGHT PANEL - Matrix ===== */
    .matrix-panel {
      padding: 32px;
      overflow-y: auto;
      background: var(--bg-primary);
    }
    
    .matrix-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 24px;
    }
    
    .matrix-panel-title {
      font-family: 'Instrument Serif', serif;
      font-size: 1.5rem;
      color: var(--text-primary);
      margin-bottom: 4px;
    }
    
    .matrix-panel-subtitle {
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    
    .matrix-context-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .matrix-context-badge strong {
      color: var(--accent);
    }
    
    /* Role Summary Card */
    .role-summary-card {
      background: linear-gradient(135deg, var(--bg-secondary), rgba(59, 130, 246, 0.05));
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
    }
    
    .role-summary-label {
      font-size: 0.65rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--accent-green);
      margin-bottom: 8px;
    }
    
    .role-summary-title {
      font-family: 'Instrument Serif', serif;
      font-size: 1.3rem;
      color: var(--text-primary);
      margin-bottom: 16px;
    }
    
    .role-summary-dims {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .role-summary-dim {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      background: var(--bg-primary);
      border-radius: 8px;
      border-left: 3px solid var(--border);
    }
    
    .role-summary-dim.selected {
      border-left-color: var(--accent-green);
    }
    
    .role-summary-dim-name {
      font-size: 0.8rem;
      color: var(--text-muted);
    }
    
    .role-summary-dim-value {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .role-summary-dim:not(.selected) .role-summary-dim-value {
      color: var(--text-muted);
      font-style: italic;
      font-weight: 400;
    }
    
    /* Matrix Grid */
    .matrix-container {
      overflow-x: auto;
      margin-bottom: 24px;
    }
    
    .matrix-grid {
      display: grid;
      grid-template-columns: 160px repeat(6, 1fr);
      gap: 4px;
      min-width: 700px;
    }
    
    .matrix-header {
      background: transparent;
      padding: 10px 6px;
      text-align: center;
    }
    
    .matrix-header .level-num {
      font-size: 0.65rem;
      font-weight: 700;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    .matrix-header .level-name {
      font-size: 0.65rem;
      color: var(--text-secondary);
    }
    
    .matrix-dim-label {
      background: var(--bg-secondary);
      border-radius: 8px;
      padding: 10px;
      display: flex;
      align-items: center;
    }
    
    .matrix-dim-label span {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .matrix-cell {
      background: var(--bg-secondary);
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 8px 6px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      min-height: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .matrix-cell:hover {
      background: var(--bg-tertiary);
      border-color: var(--border-light);
    }
    
    .matrix-cell.selected {
      border-color: var(--accent-green);
      background: rgba(34, 197, 94, 0.1);
    }
    
    .matrix-cell .cell-icon {
      font-size: 1rem;
      margin-bottom: 2px;
    }
    
    .matrix-cell .cell-title {
      font-size: 0.65rem;
      font-weight: 600;
      color: var(--text-secondary);
      line-height: 1.3;
    }
    
    .matrix-cell.selected .cell-title {
      color: var(--text-primary);
    }
    
    /* Selection Summary */
    .selection-summary {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
    }
    
    .selection-summary h4 {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--accent-green);
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .selection-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid rgba(34, 197, 94, 0.1);
    }
    
    .selection-item:last-child {
      border-bottom: none;
    }
    
    .selection-item .dim-name {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    .selection-item .level-badge {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--accent-green);
    }
    
    /* Job Title Input */
    .job-title-input {
      width: 100%;
      background: var(--bg-secondary);
      border: 2px solid var(--border);
      border-radius: 10px;
      padding: 14px;
      color: var(--text-primary);
      font-size: 1.1rem;
      font-weight: 600;
      font-family: inherit;
      text-align: center;
      margin-bottom: 16px;
    }
    
    .job-title-input:focus {
      outline: none;
      border-color: var(--accent-green);
    }
    
    .job-title-input::placeholder {
      color: var(--text-muted);
      font-weight: 400;
    }
    
    /* PBJD Output */
    .pbjd-output {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 16px;
      overflow: hidden;
    }
    
    .pbjd-header {
      background: linear-gradient(135deg, var(--accent-green), #16a34a);
      padding: 20px 24px;
    }
    
    .pbjd-header .label {
      font-size: 0.65rem;
      font-weight: 600;
      color: rgba(255,255,255,0.8);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 4px;
    }
    
    .pbjd-header h2 {
      font-family: 'Instrument Serif', serif;
      font-size: 1.3rem;
      font-weight: 400;
      color: white;
    }
    
    .pbjd-body {
      padding: 24px;
    }
    
    .pbjd-section {
      margin-bottom: 20px;
    }
    
    .pbjd-section:last-child {
      margin-bottom: 0;
    }
    
    .pbjd-section h3 {
      font-size: 0.8rem;
      font-weight: 700;
      color: var(--accent-green);
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .pbjd-section p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.6;
    }
    
    .pbjd-list {
      list-style: none;
    }
    
    .pbjd-list li {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 8px;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    .pbjd-list li::before {
      content: "‚ñ∏";
      color: var(--accent-green);
      font-weight: 700;
      flex-shrink: 0;
    }
    
    .interview-question {
      background: var(--bg-tertiary);
      border-left: 3px solid var(--accent);
      padding: 12px 14px;
      margin-bottom: 10px;
      border-radius: 0 8px 8px 0;
    }
    
    .interview-question .category {
      font-size: 0.65rem;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 4px;
    }
    
    .interview-question .question {
      font-size: 0.85rem;
      color: var(--text-primary);
      font-style: italic;
    }
    
    /* Placeholder States */
    .matrix-placeholder {
      background: var(--bg-secondary);
      border: 2px dashed var(--border);
      border-radius: 16px;
      padding: 60px 40px;
      text-align: center;
    }
    
    .matrix-placeholder-icon {
      font-size: 3rem;
      margin-bottom: 16px;
      opacity: 0.5;
    }
    
    .matrix-placeholder-title {
      font-family: 'Instrument Serif', serif;
      font-size: 1.3rem;
      color: var(--text-primary);
      margin-bottom: 8px;
    }
    
    .matrix-placeholder-text {
      font-size: 0.9rem;
      color: var(--text-muted);
      max-width: 400px;
      margin: 0 auto;
    }
    
    /* Function Warning */
    .function-warning {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.3);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
    }
    
    .function-warning-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--accent-warm);
      margin-bottom: 8px;
    }
    
    .function-warning-text {
      font-size: 0.8rem;
      color: var(--text-secondary);
    }
    
    /* Responsive */
    @media (max-width: 1000px) {
      .builder-layout {
        grid-template-columns: 1fr;
      }
      
      .questions-panel {
        max-height: none;
        position: relative;
      }
      
      .intro-explanation {
        grid-template-columns: 1fr;
      }
      
      .intro-arrow {
        transform: rotate(90deg);
      }
      
      .role-summary-dims {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 600px) {
      .intro-stats {
        gap: 32px;
      }
      
      .intro-stat-number {
        font-size: 2.5rem;
      }
      
      .options-grid.two-col {
        grid-template-columns: 1fr;
      }
      
      .input-row {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // ========================================
    // DATA DEFINITIONS (preserved from original)
    // ========================================
    
    const STEPS = [
      { id: 'qualify', label: 'Volume' },
      { id: 'family', label: 'Family' },
      { id: 'focus', label: 'Focus' },
      { id: 'context', label: 'Context' },
      { id: 'process', label: 'Process' },
      { id: 'dimensions', label: 'Dimensions' },
      { id: 'levels', label: 'Levels' },
      { id: 'select', label: 'Build Role' },
      { id: 'output', label: 'PBJD' }
    ];

    const JOB_FAMILIES = [
      { id: 'sales', name: 'Sales', icon: 'üíº', available: true },
      { id: 'engineering', name: 'Engineering', icon: '‚öôÔ∏è', available: false },
      { id: 'customer_success', name: 'Customer Success', icon: 'ü§ù', available: false },
      { id: 'marketing', name: 'Marketing', icon: 'üì£', available: false },
      { id: 'product', name: 'Product', icon: 'üéØ', available: false },
      { id: 'finance', name: 'Finance', icon: 'üìä', available: false },
      { id: 'operations', name: 'Operations', icon: 'üîß', available: false },
      { id: 'other', name: 'Other', icon: 'üìã', available: false }
    ];

    const FOCUS_OPTIONS = {
      sales: [
        { id: 'hunter', name: 'Hunter', desc: 'New logo acquisition - finding and closing new customers' },
        { id: 'farmer', name: 'Farmer', desc: 'Account growth - expanding and retaining existing customers' },
        { id: 'hybrid', name: 'Hybrid', desc: 'Mix of new business and account management' }
      ],
      engineering: [
        { id: 'build', name: '0‚Üí1 Build', desc: 'Creating new products/features from scratch' },
        { id: 'scale', name: 'Scale', desc: 'Growing and optimizing existing systems' },
        { id: 'sustain', name: 'Sustain', desc: 'Maintaining and improving reliability' }
      ],
      customer_success: [
        { id: 'onboarding', name: 'Onboarding', desc: 'Getting new customers to value quickly' },
        { id: 'retention', name: 'Retention', desc: 'Keeping customers healthy and renewed' },
        { id: 'expansion', name: 'Expansion', desc: 'Growing revenue within accounts' }
      ]
    };

    const DEFAULT_DIMENSIONS = {
      'sales_hunter': [
        { id: 'prospecting', name: 'Prospecting & Pipeline', desc: 'How they generate and qualify opportunities' },
        { id: 'deal_complexity', name: 'Deal Complexity', desc: 'Size, length, and stakeholder complexity of deals' },
        { id: 'product_fluency', name: 'Product & Solution Fluency', desc: 'Technical depth, demo ability, solution design' },
        { id: 'territory_quota', name: 'Territory & Quota Management', desc: 'Planning, forecasting, pipeline management' },
        { id: 'collaboration', name: 'Collaboration & Orchestration', desc: 'SE coordination, discovery process, internal resources' },
        { id: 'process_discipline', name: 'Process & Discipline', desc: 'CRM hygiene, methodology, forecasting accuracy' }
      ],
      'sales_farmer': [
        { id: 'relationship', name: 'Relationship Management', desc: 'Depth and breadth of customer relationships' },
        { id: 'expansion', name: 'Expansion & Upsell', desc: 'Identifying and closing growth opportunities' },
        { id: 'product_fluency', name: 'Product & Solution Fluency', desc: 'Technical depth across the product portfolio' },
        { id: 'territory_quota', name: 'Territory & Quota Management', desc: 'Account planning, forecasting, renewal management' },
        { id: 'collaboration', name: 'Collaboration & Orchestration', desc: 'CSM coordination, executive alignment, internal advocacy' },
        { id: 'process_discipline', name: 'Process & Discipline', desc: 'Account health tracking, QBRs, documentation' }
      ],
      'sales_hybrid': [
        { id: 'prospecting', name: 'Prospecting & Pipeline', desc: 'How they generate and qualify opportunities' },
        { id: 'relationship', name: 'Relationship Management', desc: 'Depth and breadth of customer relationships' },
        { id: 'deal_complexity', name: 'Deal Complexity', desc: 'Size, length, and stakeholder complexity of deals' },
        { id: 'product_fluency', name: 'Product & Solution Fluency', desc: 'Technical depth, demo ability, solution design' },
        { id: 'collaboration', name: 'Collaboration & Orchestration', desc: 'SE/CSM coordination, internal resources' },
        { id: 'process_discipline', name: 'Process & Discipline', desc: 'CRM hygiene, methodology, forecasting accuracy' }
      ]
    };

    const LEVEL_DEFINITIONS = {
      'prospecting': [
        { level: 1, icon: 'üì•', title: 'Inbound Handler', kpo: 'Responds to and qualifies inbound leads' },
        { level: 2, icon: 'üìû', title: 'Cold Prospector', kpo: 'Books meetings through outbound activity' },
        { level: 3, icon: 'üéØ', title: 'Multi-Channel', kpo: 'Orchestrates email, phone, social, events' },
        { level: 4, icon: 'üó∫Ô∏è', title: 'Account Strategist', kpo: 'Multi-threaded approach, executive access' },
        { level: 5, icon: 'üï∏Ô∏è', title: 'Network Builder', kpo: 'Generates pipeline through relationships and referrals' },
        { level: 6, icon: 'üí°', title: 'Category Creator', kpo: 'Creates demand through thought leadership' }
      ],
      'deal_complexity': [
        { level: 1, icon: 'üí≥', title: 'Transactional', kpo: '<$10K, single call close, high volume' },
        { level: 2, icon: 'ü§ù', title: 'SMB', kpo: '$10-50K, 1-2 stakeholders, 30-60 day cycle' },
        { level: 3, icon: 'üìã', title: 'Mid-Market', kpo: '$50-250K, multiple stakeholders, procurement' },
        { level: 4, icon: 'üè¢', title: 'Enterprise', kpo: '$250K-1M+, C-suite, complex procurement' },
        { level: 5, icon: 'üèõÔ∏è', title: 'Strategic', kpo: '$1M+ multi-year, board-level relationships' },
        { level: 6, icon: 'üåê', title: 'Transformational', kpo: 'Platform deals that change how customer operates' }
      ],
      'product_fluency': [
        { level: 1, icon: 'üìñ', title: 'Script-Based', kpo: 'Follows talk track, relies on SE for technical' },
        { level: 2, icon: 'üé§', title: 'Demo Ready', kpo: 'Delivers standard demos, handles basic objections' },
        { level: 3, icon: 'üîó', title: 'Solution Mapper', kpo: 'Maps product to customer needs, integration-aware' },
        { level: 4, icon: 'üõ°Ô∏è', title: 'Technical Seller', kpo: 'Handles technical discovery, counters competitive FUD' },
        { level: 5, icon: 'üîÆ', title: 'Product Influencer', kpo: 'Shapes roadmap based on market intelligence' },
        { level: 6, icon: 'üåü', title: 'Thought Leader', kpo: 'Industry expert, keynotes, shapes market perception' }
      ],
      'territory_quota': [
        { level: 1, icon: 'üìù', title: 'Activity Managed', kpo: 'Hits activity metrics, basic pipeline tracking' },
        { level: 2, icon: 'üìä', title: 'Pipeline Aware', kpo: 'Accurate forecasting, understands coverage ratios' },
        { level: 3, icon: 'üóìÔ∏è', title: 'Quarter Planner', kpo: 'Builds quarterly plan, manages commit vs upside' },
        { level: 4, icon: 'üìà', title: 'Territory Optimizer', kpo: 'Data-driven planning, exceeds quota 10-20%' },
        { level: 5, icon: 'üß≠', title: 'Market Intelligence', kpo: 'Identifies new segments, informs GTM strategy' },
        { level: 6, icon: 'üåç', title: 'GTM Strategist', kpo: 'Defines territory strategy for region/segment' }
      ],
      'collaboration': [
        { level: 1, icon: 'üìß', title: 'SE Requester', kpo: 'Follows protocol to engage SE resources' },
        { level: 2, icon: 'üîç', title: 'Discovery Partner', kpo: 'Runs discovery with SE, clear handoffs' },
        { level: 3, icon: 'üé™', title: 'Deal Orchestrator', kpo: 'Coordinates SE, legal, exec sponsors on deals' },
        { level: 4, icon: '‚ö°', title: 'Resource Optimizer', kpo: 'Maximizes SE efficiency across deals' },
        { level: 5, icon: 'üìö', title: 'Cross-Func Leader', kpo: 'Drives alignment with Marketing, Product, CS' },
        { level: 6, icon: 'üèóÔ∏è', title: 'Org Designer', kpo: 'Shapes SE allocation and deal team structure' }
      ],
      'process_discipline': [
        { level: 1, icon: '‚úÖ', title: 'Checklist Follower', kpo: 'Completes required CRM fields, follows playbook' },
        { level: 2, icon: 'üìã', title: 'Process Compliant', kpo: 'Accurate pipeline data, methodology adherent' },
        { level: 3, icon: 'üîß', title: 'Process Optimizer', kpo: 'Identifies improvement opportunities, clean forecasts' },
        { level: 4, icon: 'üìê', title: 'System Designer', kpo: 'Creates playbooks and processes for team' },
        { level: 5, icon: 'üîó', title: 'Org Integrator', kpo: 'Defines interfaces between Sales and other functions' },
        { level: 6, icon: 'üöÄ', title: 'Future Builder', kpo: 'Designs next-gen sales infrastructure and process' }
      ],
      'relationship': [
        { level: 1, icon: 'üìû', title: 'Reactive', kpo: 'Responds to customer requests and issues' },
        { level: 2, icon: 'ü§ù', title: 'Trusted Rep', kpo: 'Customers take calls, return business' },
        { level: 3, icon: 'üë•', title: 'Multi-Threaded', kpo: 'Relationships across multiple stakeholders' },
        { level: 4, icon: 'üíº', title: 'Strategic Advisor', kpo: 'Invited to customer planning sessions' },
        { level: 5, icon: 'üéØ', title: 'Business Partner', kpo: 'Co-creates solutions, joint planning' },
        { level: 6, icon: 'üåü', title: 'Executive Connector', kpo: 'C-suite relationships, industry networking' }
      ],
      'expansion': [
        { level: 1, icon: 'üîÑ', title: 'Renewal Processor', kpo: 'Handles standard renewals accurately' },
        { level: 2, icon: 'üîç', title: 'Opportunity Identifier', kpo: 'Spots upsell opportunities during interactions' },
        { level: 3, icon: 'üìà', title: 'Growth Driver', kpo: 'Proactively identifies and closes expansion deals' },
        { level: 4, icon: 'üó∫Ô∏è', title: 'Account Planner', kpo: 'Creates and executes account growth plans' },
        { level: 5, icon: 'üè¢', title: 'Enterprise Expander', kpo: 'Drives multi-product, multi-department adoption' },
        { level: 6, icon: 'üåê', title: 'Strategic Partner', kpo: 'Transforms customer operations, platform deals' }
      ]
    };

    // ========================================
    // MAIN APP COMPONENT
    // ========================================
    
    function MatrixBuilder() {
      const [showIntro, setShowIntro] = useState(true);
      const [step, setStep] = useState(0);
      const [data, setData] = useState({
        volume: null,
        family: null,
        focus: null,
        industry: '',
        companyStage: '',
        dealSize: '',
        processOfSuccess: '',
        dimensions: [],
        levels: {},
        jobTitle: ''
      });

      const currentStep = STEPS[step];
      
      const updateData = (key, value) => {
        setData(prev => ({ ...prev, [key]: value }));
      };

      const canProceed = () => {
        switch (currentStep?.id) {
          case 'qualify': return data.volume !== null;
          case 'family': return data.family !== null;
          case 'focus': return data.focus !== null;
          case 'context': return data.industry && data.companyStage;
          case 'process': return data.processOfSuccess.length > 20;
          case 'dimensions': return data.dimensions.length === 6;
          case 'levels': return true;
          case 'select': return Object.keys(data.levels).length === 6;
          default: return true;
        }
      };

      const handleNext = () => {
        if (currentStep.id === 'process' && data.dimensions.length === 0) {
          const key = `${data.family}_${data.focus}`;
          const dims = DEFAULT_DIMENSIONS[key] || DEFAULT_DIMENSIONS['sales_hunter'];
          updateData('dimensions', dims);
        }
        setStep(s => Math.min(s + 1, STEPS.length - 1));
      };

      const handleBack = () => {
        setStep(s => Math.max(s - 1, 0));
      };

      const handleLevelSelect = (dimId, level) => {
        setData(prev => ({
          ...prev,
          levels: { ...prev.levels, [dimId]: level }
        }));
      };

      const handleStart = () => {
        setShowIntro(false);
      };

      const handleBackToIntro = () => {
        setShowIntro(true);
        setStep(0);
        setData({
          volume: null,
          family: null,
          focus: null,
          industry: '',
          companyStage: '',
          dealSize: '',
          processOfSuccess: '',
          dimensions: [],
          levels: {},
          jobTitle: ''
        });
      };

      // ========================================
      // INTRO SCREEN
      // ========================================
      if (showIntro) {
        return (
          <div className="intro-screen">
            <div className="intro-badge">
              <span>üéØ</span>
              Performance-Based Hiring
            </div>
            
            <h1 className="intro-title serif">
              The <span>6√ó6 Matrix</span>
            </h1>
            
            <p className="intro-subtitle">
              Define any role as a unique combination of 6 dimensions √ó 6 levels.
              Like Minecraft for building organizations ‚Äî one block at a time.
            </p>
            
            <div className="intro-stats">
              <div className="intro-stat">
                <div className="intro-stat-number">6</div>
                <div className="intro-stat-label">Dimensions</div>
              </div>
              <div className="intro-stat">
                <div className="intro-stat-number">6</div>
                <div className="intro-stat-label">Levels Each</div>
              </div>
              <div className="intro-stat">
                <div className="intro-stat-number">46,656</div>
                <div className="intro-stat-label">Unique Profiles</div>
              </div>
            </div>
            
            <div className="intro-visual">
              {[...Array(36)].map((_, i) => {
                const highlighted = [2, 8, 16, 21, 27, 33].includes(i);
                return (
                  <div key={i} className={`intro-cell ${highlighted ? 'highlight' : ''}`}>
                    {highlighted ? '‚úì' : ''}
                  </div>
                );
              })}
            </div>
            
            <div className="intro-explanation">
              <div className="intro-box problem">
                <div className="intro-box-label">‚ùå The Old Way</div>
                <div className="intro-box-text">
                  <strong>"5+ years experience"</strong><br/>
                  Vague requirements that don't predict success.
                </div>
              </div>
              
              <div className="intro-arrow">‚Üí</div>
              
              <div className="intro-box solution">
                <div className="intro-box-label">‚úì The 6√ó6 Way</div>
                <div className="intro-box-text">
                  <strong>Specific competency combinations</strong><br/>
                  Precise levels across 6 dimensions.
                </div>
              </div>
            </div>
            
            <button className="intro-cta" onClick={handleStart}>
              Build Your 6√ó6 Matrix ‚Üí
            </button>
            
            <div className="intro-footer">
              Performance-Based Hiring Learning Systems ‚Ä¢ Moneyball for HR‚Ñ¢
            </div>
          </div>
        );
      }

      // ========================================
      // PROGRESS BAR
      // ========================================
      const renderProgress = () => (
        <div className="progress-bar">
          {STEPS.map((s, i) => (
            <React.Fragment key={s.id}>
              <div className={`progress-step ${i < step ? 'completed' : i === step ? 'active' : 'pending'}`}>
                {i < step ? '‚úì' : i + 1}
              </div>
              {i < STEPS.length - 1 && (
                <div className={`progress-line ${i < step ? 'completed' : ''}`} />
              )}
            </React.Fragment>
          ))}
        </div>
      );

      // ========================================
      // STEP RENDERERS
      // ========================================

      // Step 1: Qualify
      const renderQualify = () => (
        <>
          <div className="step-label">Step 1 of 9</div>
          <h2 className="step-title serif">How many related roles are you hiring?</h2>
          <p className="step-subtitle">The 6√ó6 Matrix is designed for scaling job families, not one-off hires.</p>
          
          <div className="options-grid">
            <button 
              className={`option-btn ${data.volume === '1-2' ? 'selected' : ''}`}
              onClick={() => updateData('volume', '1-2')}
            >
              <div className="option-title">1-2 roles</div>
              <div className="option-desc">Individual hires</div>
            </button>
            <button 
              className={`option-btn ${data.volume === '3-10' ? 'selected' : ''}`}
              onClick={() => updateData('volume', '3-10')}
            >
              <div className="option-title">3-10 roles</div>
              <div className="option-desc">Building a team</div>
            </button>
            <button 
              className={`option-btn ${data.volume === '10+' ? 'selected' : ''}`}
              onClick={() => updateData('volume', '10+')}
            >
              <div className="option-title">10+ roles</div>
              <div className="option-desc">Scaling a function</div>
            </button>
          </div>

          {data.volume === '1-2' && (
            <div className="route-card">
              <h3>For 1-2 hires, use the PbH Talent Hub</h3>
              <p>The Talent Hub is designed for individual role searches with targeted PBJD creation.</p>
              <a href="https://hiring.tips/PbH_hub.com" target="_blank">Go to Talent Hub ‚Üí</a>
            </div>
          )}
        </>
      );

      // Step 2: Family
      const renderFamily = () => (
        <>
          <div className="step-label">Step 2 of 9</div>
          <h2 className="step-title serif">What function are you building?</h2>
          <p className="step-subtitle">Select the job family you're scaling.</p>
          
          <div className="options-grid two-col">
            {JOB_FAMILIES.map(fam => (
              <button 
                key={fam.id}
                className={`option-btn ${data.family === fam.id ? 'selected' : ''}`}
                onClick={() => updateData('family', fam.id)}
                style={{ opacity: fam.available ? 1 : 0.5 }}
              >
                <div className="option-title">{fam.icon} {fam.name}</div>
                {!fam.available && <div className="option-desc" style={{ color: '#f59e0b' }}>Coming soon</div>}
              </button>
            ))}
          </div>
          
          {data.family && !JOB_FAMILIES.find(f => f.id === data.family)?.available && (
            <div className="function-warning">
              <div className="function-warning-title">
                ‚ö†Ô∏è Function Not Yet Available
              </div>
              <div className="function-warning-text">
                The 6√ó6 Matrix for {JOB_FAMILIES.find(f => f.id === data.family)?.name} is still being developed. 
                Currently, only Sales is fully supported with function-specific dimensions and levels.
              </div>
            </div>
          )}
        </>
      );

      // Step 3: Focus
      const renderFocus = () => {
        const options = FOCUS_OPTIONS[data.family] || FOCUS_OPTIONS.sales;
        return (
          <>
            <div className="step-label">Step 3 of 9</div>
            <h2 className="step-title serif">What's the core focus?</h2>
            <p className="step-subtitle">This fundamentally shapes the matrix dimensions and KPOs.</p>
            
            <div className="options-grid">
              {options.map(opt => (
                <button 
                  key={opt.id}
                  className={`option-btn ${data.focus === opt.id ? 'selected' : ''}`}
                  onClick={() => updateData('focus', opt.id)}
                >
                  <div className="option-title">{opt.name}</div>
                  <div className="option-desc">{opt.desc}</div>
                </button>
              ))}
            </div>
          </>
        );
      };

      // Step 4: Context
      const renderContext = () => (
        <>
          <div className="step-label">Step 4 of 9</div>
          <h2 className="step-title serif">Tell us about your context</h2>
          <p className="step-subtitle">This helps calibrate the matrix to your reality.</p>
          
          <div className="input-row">
            <div className="input-group">
              <label>Industry / What you sell</label>
              <input 
                type="text" 
                placeholder="e.g., B2B SaaS, Healthcare tech"
                value={data.industry}
                onChange={e => updateData('industry', e.target.value)}
              />
            </div>
            <div className="input-group">
              <label>Company Stage</label>
              <select 
                value={data.companyStage}
                onChange={e => updateData('companyStage', e.target.value)}
              >
                <option value="">Select...</option>
                <option value="startup">Startup (1-50)</option>
                <option value="scaleup">Scale-up (50-500)</option>
                <option value="enterprise">Enterprise (500+)</option>
              </select>
            </div>
          </div>
          
          <div className="input-group">
            <label>Typical Deal Size / Complexity</label>
            <input 
              type="text" 
              placeholder="e.g., $50-200K ACV, 3-6 month sales cycle"
              value={data.dealSize}
              onChange={e => updateData('dealSize', e.target.value)}
            />
          </div>
        </>
      );

      // Step 5: Process of Success
      const renderProcess = () => (
        <>
          <div className="step-label">Step 5 of 9</div>
          <h2 className="step-title serif">How do deals get done here?</h2>
          <p className="step-subtitle">Walk us through the motion - from first touch to closed deal.</p>
          
          <div className="hint-box">
            <p><strong>Think about:</strong> Who finds the leads? How do demos work? When do SEs get involved? What does discovery look like? How complex is procurement?</p>
          </div>
          
          <textarea 
            className="text-input"
            placeholder="Example: Leads come mostly from inbound marketing. AEs qualify and run initial discovery. For anything over $50K, we bring in an SE early for technical deep-dive. Complex deals need multiple stakeholders aligned - usually a champion, technical buyer, and economic buyer..."
            value={data.processOfSuccess}
            onChange={e => updateData('processOfSuccess', e.target.value)}
          />
        </>
      );

      // Step 6: Validate Dimensions
      const renderDimensions = () => (
        <>
          <div className="step-label">Step 6 of 9</div>
          <h2 className="step-title serif">Validate your 6 dimensions</h2>
          <p className="step-subtitle">These are the factors that differentiate performance in your roles.</p>
          
          <div className="dimensions-list">
            {data.dimensions.map((dim, i) => (
              <div key={dim.id} className="dimension-item">
                <div className="dimension-number">{i + 1}</div>
                <div className="dimension-content">
                  <div className="dimension-name">{dim.name}</div>
                  <div className="dimension-desc">{dim.desc}</div>
                </div>
                <button className="dimension-edit">Edit</button>
              </div>
            ))}
          </div>
          
          <div className="hint-box">
            <p><strong>Missing something?</strong> Consider: Territory Management, Quota Management, Collaboration & Orchestration (SE involvement, discovery process)</p>
          </div>
        </>
      );

      // Step 7: Generate Levels
      const renderLevels = () => (
        <>
          <div className="step-label">Step 7 of 9</div>
          <h2 className="step-title serif">6 levels per dimension</h2>
          <p className="step-subtitle">From entry to strategic ‚Äî here's the progression for each dimension.</p>
          
          <div className="hint-box">
            <p><strong>How levels work:</strong> Level 1 is entry-level (think SDR handling inbound). Level 6 is strategic (VP-level impact). Most AEs operate at Level 2-4 depending on deal complexity.</p>
          </div>
          
          {data.dimensions.map((dim, i) => {
            const levels = LEVEL_DEFINITIONS[dim.id] || LEVEL_DEFINITIONS['prospecting'];
            return (
              <div key={dim.id} style={{ marginBottom: '14px' }}>
                <div style={{ fontSize: '0.8rem', fontWeight: '600', color: 'var(--text-primary)', marginBottom: '6px' }}>
                  {i + 1}. {dim.name}
                </div>
                <div style={{ display: 'flex', gap: '6px', overflowX: 'auto', paddingBottom: '6px' }}>
                  {levels.map(lvl => (
                    <div key={lvl.level} style={{ 
                      flex: '0 0 auto',
                      background: 'var(--bg-secondary)', 
                      border: '1px solid var(--border)',
                      borderRadius: '8px',
                      padding: '8px 10px',
                      minWidth: '100px'
                    }}>
                      <div style={{ fontSize: '0.9rem', marginBottom: '2px' }}>{lvl.icon}</div>
                      <div style={{ fontSize: '0.65rem', fontWeight: '600', color: 'var(--text-secondary)' }}>L{lvl.level}: {lvl.title}</div>
                    </div>
                  ))}
                </div>
              </div>
            );
          })}
        </>
      );

      // Step 8: Select Levels (Build Role)
      const renderSelect = () => (
        <>
          <div className="step-label">Step 8 of 9</div>
          <h2 className="step-title serif">Build a role</h2>
          <p className="step-subtitle">Select one level per dimension. The combination defines the role.</p>
          
          {Object.keys(data.levels).length > 0 && (
            <div className="selection-summary">
              <h4>Current Selection</h4>
              {data.dimensions.map(dim => {
                const selectedLevel = data.levels[dim.id];
                const levels = LEVEL_DEFINITIONS[dim.id] || LEVEL_DEFINITIONS['prospecting'];
                const lvl = levels.find(l => l.level === selectedLevel);
                return selectedLevel ? (
                  <div key={dim.id} className="selection-item">
                    <span className="dim-name">{dim.name}</span>
                    <span className="level-badge">{lvl?.icon} L{selectedLevel}: {lvl?.title}</span>
                  </div>
                ) : null;
              })}
            </div>
          )}
        </>
      );

      // Step 9: Output
      const renderOutput = () => {
        const generateKPOs = () => {
          return data.dimensions.map(dim => {
            const levels = LEVEL_DEFINITIONS[dim.id] || LEVEL_DEFINITIONS['prospecting'];
            const lvl = levels.find(l => l.level === data.levels[dim.id]);
            return `${dim.name}: ${lvl?.kpo}`;
          });
        };

        const generateQuestions = () => {
          const questions = [];
          
          if (data.levels['prospecting'] >= 3) {
            questions.push({
              category: 'Prospecting & Pipeline',
              question: 'Walk me through how you build pipeline in a new territory. What channels do you use? Give me a specific example of a deal you sourced yourself.'
            });
          }
          
          if (data.levels['deal_complexity'] >= 3) {
            questions.push({
              category: 'Deal Complexity',
              question: 'Tell me about the most complex deal you\'ve closed. How many stakeholders were involved? What made it complex and how did you navigate it?'
            });
          }
          
          if (data.levels['collaboration'] >= 2) {
            questions.push({
              category: 'Collaboration & Orchestration',
              question: 'How do you work with SEs? Walk me through a recent deal where you had to coordinate multiple internal resources. When do you bring in the SE?'
            });
          }
          
          if (data.levels['territory_quota'] >= 3) {
            questions.push({
              category: 'Territory & Quota Management',
              question: 'How do you build your territory plan? Walk me through your forecasting process. What\'s your commit vs upside framework?'
            });
          }
          
          questions.push({
            category: 'Process & Discipline',
            question: 'Tell me about a deal that went sideways. What happened? Looking back, what would you have done differently?'
          });
          
          return questions;
        };

        return (
          <>
            <div className="step-label">Step 9 of 9</div>
            <h2 className="step-title serif">Name this role</h2>
            
            <input 
              type="text"
              className="job-title-input"
              placeholder="e.g., Account Executive, Enterprise AE"
              value={data.jobTitle}
              onChange={e => updateData('jobTitle', e.target.value)}
            />
            
            <div className="pbjd-output">
              <div className="pbjd-header">
                <div className="label">Performance-Based Job Description</div>
                <h2>{data.jobTitle || 'Untitled Role'}</h2>
              </div>
              
              <div className="pbjd-body">
                <div className="pbjd-section">
                  <h3>Performance Objective</h3>
                  <p>
                    Within the first 6 months, become a productive member of the sales team, 
                    consistently {data.levels['territory_quota'] >= 3 ? 'exceeding quota' : 'hitting activity targets'} while 
                    {data.levels['deal_complexity'] >= 3 ? ' managing complex multi-stakeholder deals' : ' building pipeline'} 
                    {data.levels['collaboration'] >= 3 ? ' and effectively orchestrating internal resources to advance opportunities' : ''}.
                  </p>
                </div>
                
                <div className="pbjd-section">
                  <h3>Key Performance Outcomes</h3>
                  <ul className="pbjd-list">
                    {generateKPOs().map((kpo, i) => (
                      <li key={i}>{kpo}</li>
                    ))}
                  </ul>
                </div>
                
                <div className="pbjd-section">
                  <h3>Interview Questions</h3>
                  {generateQuestions().map((q, i) => (
                    <div key={i} className="interview-question">
                      <div className="category">{q.category}</div>
                      <div className="question">"{q.question}"</div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </>
        );
      };

      // ========================================
      // MATRIX PANEL (Right Side - Real-time)
      // ========================================
      const renderMatrixPanel = () => {
        // Before dimensions are set, show placeholder
        if (data.dimensions.length === 0) {
          return (
            <div className="matrix-placeholder">
              <div className="matrix-placeholder-icon">üìä</div>
              <div className="matrix-placeholder-title serif">Your 6√ó6 Matrix</div>
              <div className="matrix-placeholder-text">
                Complete the discovery questions to generate your custom matrix with 6 dimensions and 6 levels each.
              </div>
            </div>
          );
        }

        const getFamilyName = () => JOB_FAMILIES.find(f => f.id === data.family)?.name || 'Custom';
        const getFocusName = () => {
          const options = FOCUS_OPTIONS[data.family] || [];
          return options.find(o => o.id === data.focus)?.name || '';
        };

        return (
          <>
            <div className="matrix-panel-header">
              <div>
                <h2 className="matrix-panel-title serif">Your {getFamilyName()} Matrix</h2>
                <p className="matrix-panel-subtitle">Select one level per dimension to build a role</p>
              </div>
              <div className="matrix-context-badge">
                <strong>{getFamilyName()}</strong> ‚Ä¢ {getFocusName()} ‚Ä¢ {data.industry || 'Your Industry'}
              </div>
            </div>
            
            {/* Role Summary Card */}
            <div className="role-summary-card">
              <div className="role-summary-label">Building Role Profile</div>
              <h3 className="role-summary-title serif">{data.jobTitle || 'Select levels to define role'}</h3>
              <div className="role-summary-dims">
                {data.dimensions.map(dim => {
                  const selectedLevel = data.levels[dim.id];
                  const levels = LEVEL_DEFINITIONS[dim.id] || LEVEL_DEFINITIONS['prospecting'];
                  const lvl = levels.find(l => l.level === selectedLevel);
                  return (
                    <div key={dim.id} className={`role-summary-dim ${selectedLevel ? 'selected' : ''}`}>
                      <span className="role-summary-dim-name">{dim.name}</span>
                      <span className="role-summary-dim-value">
                        {lvl ? `${lvl.icon} ${lvl.title}` : 'Not selected'}
                      </span>
                    </div>
                  );
                })}
              </div>
            </div>
            
            {/* Matrix Grid */}
            <div className="matrix-container">
              <div className="matrix-grid">
                {/* Header */}
                <div className="matrix-header"></div>
                {[1,2,3,4,5,6].map(l => (
                  <div key={l} className="matrix-header">
                    <div className="level-num">L{l}</div>
                    <div className="level-name">{['Entry', 'Developing', 'Proficient', 'Advanced', 'Expert', 'Strategic'][l-1]}</div>
                  </div>
                ))}
                
                {/* Rows */}
                {data.dimensions.map(dim => {
                  const levels = LEVEL_DEFINITIONS[dim.id] || LEVEL_DEFINITIONS['prospecting'];
                  return (
                    <React.Fragment key={dim.id}>
                      <div className="matrix-dim-label">
                        <span>{dim.name}</span>
                      </div>
                      {levels.map(lvl => (
                        <div 
                          key={lvl.level}
                          className={`matrix-cell ${data.levels[dim.id] === lvl.level ? 'selected' : ''}`}
                          onClick={() => handleLevelSelect(dim.id, lvl.level)}
                        >
                          <div className="cell-icon">{lvl.icon}</div>
                          <div className="cell-title">{lvl.title}</div>
                        </div>
                      ))}
                    </React.Fragment>
                  );
                })}
              </div>
            </div>
          </>
        );
      };

      // ========================================
      // RENDER CURRENT STEP
      // ========================================
      const renderStep = () => {
        switch (currentStep?.id) {
          case 'qualify': return renderQualify();
          case 'family': return renderFamily();
          case 'focus': return renderFocus();
          case 'context': return renderContext();
          case 'process': return renderProcess();
          case 'dimensions': return renderDimensions();
          case 'levels': return renderLevels();
          case 'select': return renderSelect();
          case 'output': return renderOutput();
          default: return null;
        }
      };

      // ========================================
      // MAIN BUILDER LAYOUT
      // ========================================
      return (
        <div className="builder-layout">
          {/* Left Panel - Questions */}
          <div className="questions-panel">
            <div className="questions-header">
              <button className="questions-back" onClick={handleBackToIntro}>
                ‚Üê Start Over
              </button>
            </div>
            
            {renderProgress()}
            
            <div className="question-card">
              {renderStep()}
              
              <div className="btn-row">
                {step > 0 && (
                  <button className="btn btn-back" onClick={handleBack}>
                    ‚Üê Back
                  </button>
                )}
                
                {currentStep?.id === 'output' ? (
                  <button className="btn btn-success" style={{ flex: 1 }}>
                    Export PBJD ‚Üí
                  </button>
                ) : data.volume === '1-2' ? (
                  <div style={{ flex: 1 }} />
                ) : (
                  <button 
                    className="btn btn-primary"
                    disabled={!canProceed()}
                    onClick={handleNext}
                  >
                    Continue ‚Üí
                  </button>
                )}
              </div>
            </div>
          </div>
          
          {/* Right Panel - Matrix (Real-time) */}
          <div className="matrix-panel">
            {renderMatrixPanel()}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<MatrixBuilder />);
  </script>
</body>
</html>
